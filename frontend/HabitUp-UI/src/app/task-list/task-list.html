<div class="page">
  <header class="header">
    <div class="header-left">
      <div class="logo">âš¡</div>
      <div>
        <h1 class="app-title">HabitUp</h1>
        <p class="app-subtitle">Task Manager</p>
      </div>
    </div>
    <button class="create-btn" (click)="openCreateForm()">
      <span class="plus">+</span> Create Task
    </button>
  </header>

  <div class="stats-bar" *ngIf="tasks().length > 0">
    <span class="stat">{{ tasks().length }} task{{ tasks().length !== 1 ? 's' : '' }}</span>
    <span class="divider">Â·</span>
    <span class="stat completed-stat">{{ completedCount }} completed</span>
    <span class="divider">Â·</span>
    <span class="stat pending-stat">{{ tasks().length - completedCount }} pending</span>
  </div>

  <main class="task-grid" *ngIf="tasks().length > 0; else empty">
    <div
      class="task-card"
      [class.task-card--done]="task.completed"
      *ngFor="let task of tasks()"
    >
      <div class="task-card-top">
        <div class="task-status" [class.task-status--done]="task.completed">
          <span *ngIf="task.completed">âœ“</span>
        </div>
        <div class="task-content">
          <h3 class="task-title" [class.task-title--done]="task.completed">{{ task.title }}</h3>
          <p class="task-description" *ngIf="task.description">{{ task.description }}</p>
          <p class="task-description task-description--empty" *ngIf="!task.description">No description</p>
        </div>
      </div>

      <div class="task-meta">
        <span class="interval-badge">ğŸ” {{ intervalLabel(task) }}</span>
        <span class="start-badge">Started {{ task.startDate }}</span>
      </div>

      <div class="task-actions">
        <button class="action-btn edit-btn" (click)="openEditForm(task)">Edit</button>
        <button class="action-btn delete-btn" (click)="deleteTask(task.id)">Delete</button>
      </div>
    </div>
  </main>

  <ng-template #empty>
    <div class="empty-state">
      <div class="empty-icon">ğŸ“‹</div>
      <h2 class="empty-title">No tasks yet</h2>
      <p class="empty-body">Hit "Create Task" to get started.</p>
    </div>
  </ng-template>
</div>

<app-task-form
  *ngIf="showForm"
  [task]="editingTask"
  (save)="onSave($event)"
  (cancel)="closeForm()"
></app-task-form>
