<div class="overlay" (click)="onCancel()"></div>

<div class="modal">
  <div class="modal-header">
    <h2>{{ isEditMode ? 'Edit Task' : 'New Task' }}</h2>
    <button class="close-btn" (click)="onCancel()">✕</button>
  </div>

  <div class="modal-body">
    <div class="field">
      <label for="title">Title <span class="required">*</span></label>
      <input
        id="title"
        type="text"
        [(ngModel)]="title"
        placeholder="What needs to be done?"
        class="input"
        autofocus
      />
    </div>

    <div class="field">
      <label for="description">Description</label>
      <textarea
        id="description"
        [(ngModel)]="description"
        placeholder="Add some details..."
        class="input"
        rows="3"
      ></textarea>
    </div>

    <div class="field-row">
      <div class="field">
        <label for="dateStarted">Date Started</label>
        <input
          id="dateStarted"
          type="date"
          [(ngModel)]="dateStartedISO"
          class="input"
        />
      </div>

      <div class="field">
        <label for="dateCompleted">Date Completed</label>
        <input
          id="dateCompleted"
          type="date"
          [(ngModel)]="dateCompletedISO"
          class="input"
        />
      </div>
    </div>

    <div class="field">
      <label for="completionInterval">Completion Interval (days)</label>
      <p class="field-hint">
        How often this task repeats — enter the number of days between each completion
        (e.g. 7 = weekly, 30 = monthly). Leave blank for one-time tasks.
      </p>
      <input
        id="completionInterval"
        type="number"
        [(ngModel)]="completionIntervalRaw"
        placeholder="e.g. 7"
        class="input"
        min="1"
      />
    </div>

    <div class="field checkbox-field">
      <label class="checkbox-label">
        <input type="checkbox" [(ngModel)]="completed" class="checkbox" />
        <span class="checkbox-custom"></span>
        Mark as completed
      </label>
    </div>
  </div>

  <div class="modal-footer">
    <button class="btn btn-secondary" (click)="onCancel()">Cancel</button>
    <button class="btn btn-primary" (click)="onSave()" [disabled]="!title.trim()">
      {{ isEditMode ? 'Save Changes' : 'Create Task' }}
    </button>
  </div>
</div>
